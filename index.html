<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Editor Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="toolbar">
        <div class="tool-group">
            <button onclick="editor.undo()">‚Ü∂ Undo</button>
            <button onclick="editor.redo()">‚Ü∑ Redo</button>
        </div>
        <div class="tool-group">
            <button onclick="editor.zoomOut()">‚àí Zoom Out</button>
            <span id="zoomLevel">100%</span>
            <button onclick="editor.zoomIn()">+ Zoom In</button>
            <button onclick="editor.resetZoom()">Reset</button>
        </div>
        <div class="tool-group">
            <button onclick="editor.clearCanvas()">Clear Layer</button>
            <button onclick="editor.downloadImage()">üíæ Save Image</button>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar left">
            <h3>Tools</h3>
            <div class="toolbox">
                <button class="tool-btn active" data-tool="brush" title="Brush (B)">üñåÔ∏è</button>
                <button class="tool-btn" data-tool="eraser" title="Eraser (E)">üßπ</button>
                <button class="tool-btn" data-tool="select" title="Selection (S)">‚¨ö</button>
                <button class="tool-btn" data-tool="crop" title="Crop (C)">‚úÇÔ∏è</button>
                <button class="tool-btn" data-tool="transform" title="Transform (T)">‚ÜîÔ∏è</button>
                <button class="tool-btn" data-tool="history-brush" title="History Brush (H)">üïê</button>
                <button class="tool-btn" data-tool="rect" title="Rectangle (R)">‚ñ≠</button>
                <button class="tool-btn" data-tool="circle" title="Circle (O)">‚óã</button>
                <button class="tool-btn" data-tool="line" title="Line (L)">‚ï±</button>
                <button class="tool-btn" data-tool="text" title="Text (T)">T</button>
                <button class="tool-btn" data-tool="fill" title="Fill (F)">ü™£</button>
            </div>

            <h3>Tool Settings</h3>
            <label>Color: <input type="color" id="colorPicker" value="#000000"></label>
            <label>Size: <input type="range" id="brushSize" min="1" max="50" value="5">
            <span id="sizeLabel">5px</span></label>

            <h3>Layers</h3>
            <div id="layersList"></div>
            <button onclick="editor.addLayer()">+ Add Layer</button>
            
            <h3>Load Image</h3>
            <input type="file" id="imageUpload" accept="image/*">
            <button onclick="editor.testDraw()" style="margin-top:10px">Test Draw (Red Square)</button>
            <button onclick="localStorage.clear(); location.reload()" style="margin-top:5px">Clear Storage</button>
        </div>

        <div class="canvas-container">
            <div class="tabs">
                <div class="tab active" data-tab="0">Canvas 1</div>
                <button class="add-tab" onclick="editor.addTab()">+</button>
            </div>
            <div class="canvas-wrapper">
                <canvas id="canvas" width="800" height="600"></canvas>
                <div id="cropControls" class="crop-controls">
                    <button onclick="editor.applyCropSelection()" title="Apply Crop">‚úì</button>
                    <button onclick="editor.cancelCrop()" title="Cancel">‚úï</button>
                </div>
            </div>
        </div>

        <div class="sidebar right">
            <h3>History</h3>
            <div id="historyList" class="history-list"></div>

            <h3>Auto Enhance</h3>
            <button onclick="editor.autoEnhance()">‚ú® Auto Enhance</button>
            <button onclick="editor.autoContrast()">Auto Contrast</button>
            <button onclick="editor.autoColor()">Auto Color</button>

            <h3>Preset Filters</h3>
            <div class="filter-grid">
                <div class="filter-item" onclick="editor.applyPresetFilter('grayscale')">
                    <canvas class="filter-preview" data-filter="grayscale"></canvas>
                    <span>Grayscale</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('sepia')">
                    <canvas class="filter-preview" data-filter="sepia"></canvas>
                    <span>Sepia</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('invert')">
                    <canvas class="filter-preview" data-filter="invert"></canvas>
                    <span>Invert</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('vintage')">
                    <canvas class="filter-preview" data-filter="vintage"></canvas>
                    <span>Vintage</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('cold')">
                    <canvas class="filter-preview" data-filter="cold"></canvas>
                    <span>Cold</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('warm')">
                    <canvas class="filter-preview" data-filter="warm"></canvas>
                    <span>Warm</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('dramatic')">
                    <canvas class="filter-preview" data-filter="dramatic"></canvas>
                    <span>Dramatic</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('vivid')">
                    <canvas class="filter-preview" data-filter="vivid"></canvas>
                    <span>Vivid</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('noir')">
                    <canvas class="filter-preview" data-filter="noir"></canvas>
                    <span>Noir</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('sunset')">
                    <canvas class="filter-preview" data-filter="sunset"></canvas>
                    <span>Sunset</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('ocean')">
                    <canvas class="filter-preview" data-filter="ocean"></canvas>
                    <span>Ocean</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('cyberpunk')">
                    <canvas class="filter-preview" data-filter="cyberpunk"></canvas>
                    <span>Cyberpunk</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('hdr')">
                    <canvas class="filter-preview" data-filter="hdr"></canvas>
                    <span>HDR</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('polaroid')">
                    <canvas class="filter-preview" data-filter="polaroid"></canvas>
                    <span>Polaroid</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('crossprocess')">
                    <canvas class="filter-preview" data-filter="crossprocess"></canvas>
                    <span>Cross Process</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('lomo')">
                    <canvas class="filter-preview" data-filter="lomo"></canvas>
                    <span>Lomo</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('technicolor')">
                    <canvas class="filter-preview" data-filter="technicolor"></canvas>
                    <span>Technicolor</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('moonlight')">
                    <canvas class="filter-preview" data-filter="moonlight"></canvas>
                    <span>Moonlight</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('retro')">
                    <canvas class="filter-preview" data-filter="retro"></canvas>
                    <span>Retro</span>
                </div>
                <div class="filter-item" onclick="editor.applyPresetFilter('softfocus')">
                    <canvas class="filter-preview" data-filter="softfocus"></canvas>
                    <span>Soft Focus</span>
                </div>
            </div>

            <h3>Adjustments</h3>
            <label>Brightness: <span id="brightnessVal">0</span>
                <input type="range" id="brightness" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('brightness', this.value); editor.applyFilters()">
            </label>
            <label>Contrast: <span id="contrastVal">0</span>
                <input type="range" id="contrast" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('contrast', this.value); editor.applyFilters()">
            </label>
            <label>Exposure: <span id="exposureVal">0</span>
                <input type="range" id="exposure" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('exposure', this.value); editor.applyFilters()">
            </label>
            <label>Highlights: <span id="highlightsVal">0</span>
                <input type="range" id="highlights" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('highlights', this.value); editor.applyFilters()">
            </label>
            <label>Shadows: <span id="shadowsVal">0</span>
                <input type="range" id="shadows" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('shadows', this.value); editor.applyFilters()">
            </label>
            <label>Saturation: <span id="saturationVal">0</span>
                <input type="range" id="saturation" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('saturation', this.value); editor.applyFilters()">
            </label>
            <label>Vibrance: <span id="vibranceVal">0</span>
                <input type="range" id="vibrance" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('vibrance', this.value); editor.applyFilters()">
            </label>
            <label>Temperature: <span id="temperatureVal">0</span>
                <input type="range" id="temperature" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('temperature', this.value); editor.applyFilters()">
            </label>
            <label>Tint: <span id="tintVal">0</span>
                <input type="range" id="tint" min="-100" max="100" value="0" oninput="editor.updateAdjustmentValue('tint', this.value); editor.applyFilters()">
            </label>
            <label>Sharpness: <span id="sharpnessVal">0</span>
                <input type="range" id="sharpness" min="0" max="100" value="0" oninput="editor.updateAdjustmentValue('sharpness', this.value); editor.applyFilters()">
            </label>
            <label>Blur: <span id="blurVal">0</span>
                <input type="range" id="blur" min="0" max="10" value="0" oninput="editor.updateAdjustmentValue('blur', this.value); editor.applyFilters()">
            </label>
            <label>Vignette: <span id="vignetteVal">0</span>
                <input type="range" id="vignette" min="0" max="100" value="0" oninput="editor.updateAdjustmentValue('vignette', this.value); editor.applyFilters()">
            </label>
            <button onclick="editor.commitFilters()">Commit</button>
            <button onclick="editor.resetFilters()">Reset All</button>
        </div>
    </div>

    <script src="filters.js"></script>
    <script src="script.js"></script>
</body>
</html>
